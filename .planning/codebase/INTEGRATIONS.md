# External Integrations

**Analysis Date:** 2026-01-30

## APIs & External Services

**None currently configured.** Phase 1 (GridWorld) is self-contained and does not require external API calls.

**Future integrations (Phase 2 planning):**
- Solitaire card game rule validation API (optional, could implement locally)
- Telemetry/experiment tracking (TBD)
- Model checkpointing to cloud storage (TBD)

## Data Storage

**Databases:**
- None currently used
- All state is in-memory during training
- Phase 2 may use SQLite for experiment result logging

**File Storage:**
- Local filesystem only
- Directories:
  - `experiments/gridworld/` - Saved experiment results, training checkpoints (future)
  - `experiments/solitaire/` - Solitaire experiment results (future)
- No cloud storage integration (can be added later)

**Caching:**
- None (pure in-memory training)

## Authentication & Identity

**Auth Provider:**
- None required
- No user authentication in scope
- Code is open-source with no license restrictions beyond local development

## Monitoring & Observability

**Error Tracking:**
- None configured
- Standard Python exception handling and logging
- Stderr output to terminal during development

**Logs:**
- Approach: `print()` statements and `tqdm` progress bars for user feedback
- `tqdm` integration: Training loops use `tqdm.tqdm()` for step-by-step progress
- Example: `src/gridworld/train.py` (training loop logging - TBD for Phase 2)
- Structured logging: Not implemented; future enhancement via `logging` module

## CI/CD & Deployment

**Hosting:**
- No production deployment for Phase 1
- Local machine development + GitHub repo
- Phase 2 may require cloud GPU for training (AWS/Colab - TBD)

**CI Pipeline:**
- **Service:** GitHub Actions (free for public repos)
- **Workflow:** `.github/workflows/ci.yml`
- **Trigger:** Push to main/develop, Pull requests
- **Jobs:**
  1. **Code Quality** (ubuntu-latest):
     - Install uv
     - Set up Python 3.10
     - Run `ruff check .` (linting)
     - Run `ruff format --check .` (format check)
     - Run `mypy src/` (type check, non-blocking)
  2. **Tests** (ubuntu-latest, Python matrix 3.10/3.11/3.12):
     - Install uv
     - Run `pytest --cov --cov-report=xml`
     - Upload coverage to Codecov (Python 3.10 only)

**Codecov Integration:**
- Service: codecov/codecov-action@v3
- Coverage report: Generated by pytest, uploaded after successful test run
- Non-blocking: `fail_ci_if_error: false`

## Environment Configuration

**Required env vars:**
- None for Phase 1
- All config is in `src/gridworld/config.py` (GridWorldConfig dataclass)
- GridWorld hyperparameters: grid_size, reward_goal, reward_obstacle, reward_step

**Secrets location:**
- .gitignore includes `.env*` patterns
- No secrets needed for Phase 1
- Future: If Phase 2 needs cloud creds, use `.env.local` (not committed)

## Webhooks & Callbacks

**Incoming:**
- None

**Outgoing:**
- Codecov webhook: GitHub Actions automatically sends coverage reports
- No custom webhooks

## Integration Points with Gymnasium

**Framework Integration:** `src/gridworld/environment.py`
- Implements `gymnasium.Env` interface
- Uses `spaces.Discrete(4)` for action space (4 cardinal directions)
- Uses `spaces.Box()` for observation space (agent position as (x, y) array)
- Implements required methods:
  - `reset()` - Initialize episode
  - `step(action)` - Execute action, return (obs, reward, terminated, truncated, info)
  - `render()` - Optional visualization (not implemented yet)

## Visualization & Output

**Matplotlib (Phase 1):**
- Plots learning curves (rewards, steps per episode)
- Heatmaps of Q-values (state value estimates)
- Policy visualization (agent's learned direction arrows)
- Location: `src/visualization/plots.py` (module exists, content TBD)

**Tkinter (Phase 1):**
- Real-time GUI for playing GridWorld
- Renders grid cells, agent position, goal, obstacles
- Event handling for keyboard input (arrow keys)
- Location: `src/gridworld/play_tkinter.py`

## Summary: Integration Architecture

```
Phase 1 (GridWorld):
┌─────────────────────────────────────┐
│  Entry Points                       │
│  - play_gridworld_tkinter.py        │
│  - play_gridworld_terminal.py       │
│  - src/gridworld/train.py (random)  │
└─────────────────────────────────────┘
            ↓
┌─────────────────────────────────────┐
│  Core RL Modules                    │
│  - environment.py (Gymnasium.Env)   │
│  - agent.py (Q-learning - TBD)      │
│  - config.py (hyperparams)          │
└─────────────────────────────────────┘
            ↓
┌─────────────────────────────────────┐
│  External Dependencies              │
│  - gymnasium (Env interface)        │
│  - numpy (math)                     │
│  - matplotlib (plotting)            │
│  - tqdm (progress)                  │
│  - tkinter (GUI - stdlib)           │
└─────────────────────────────────────┘
            ↓
┌─────────────────────────────────────┐
│  Local State Only                   │
│  - In-memory: numpy arrays          │
│  - No network, DB, or file I/O      │
│  - No external API calls            │
└─────────────────────────────────────┘
```

**CI/CD Integration:**
```
GitHub Actions (CI) → codecov (Coverage) → GitHub PR comments
                ↓
           ruff check/format
           mypy type check
           pytest (all Python versions)
```

---

*Integration audit: 2026-01-30*
